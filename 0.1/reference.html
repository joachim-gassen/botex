
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python Package for using LLMs as Participants in oTree Experiments">
      
      
        <meta name="author" content="Fikir Worku Edossa and Joachim Gassen">
      
      
        <link rel="canonical" href="https://botex.trr266.de/0.1/reference.html">
      
      
        <link rel="prev" href="index.html">
      
      
      
      <link rel="icon" href="assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>API Reference - botex - LLM Bots for oTree Experiments</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="assets/css/overrides.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-G220WZ1YW7"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-G220WZ1YW7",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-G220WZ1YW7",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="API Reference - botex - LLM Bots for oTree Experiments" >
      
        <meta  property="og:description"  content="A Python Package for using LLMs as Participants in oTree Experiments" >
      
        <meta  property="og:image"  content="https://botex.trr266.de/0.1/assets/images/social/reference.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://botex.trr266.de/0.1/reference.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="API Reference - botex - LLM Bots for oTree Experiments" >
      
        <meta  name="twitter:description"  content="A Python Package for using LLMs as Participants in oTree Experiments" >
      
        <meta  name="twitter:image"  content="https://botex.trr266.de/0.1/assets/images/social/reference.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="botex - LLM Bots for oTree Experiments" class="md-header__button md-logo" aria-label="botex - LLM Bots for oTree Experiments" data-md-component="logo">
      
  <img src="assets/images/botex_logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            botex - LLM Bots for oTree Experiments
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/joachim-gassen/botex" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    joachim-gassen/botex
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="reference.html" class="md-tabs__link">
        
  
    
  
  API Reference

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="botex - LLM Bots for oTree Experiments" class="md-nav__button md-logo" aria-label="botex - LLM Bots for oTree Experiments" data-md-component="logo">
      
  <img src="assets/images/botex_logo.svg" alt="logo">

    </a>
    botex - LLM Bots for oTree Experiments
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/joachim-gassen/botex" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    joachim-gassen/botex
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="reference.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#otree-interface" class="md-nav__link">
    <span class="md-ellipsis">
      oTree Interface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="oTree Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#init_otree_session" class="md-nav__link">
    <span class="md-ellipsis">
      init_otree_session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_bot_urls" class="md-nav__link">
    <span class="md-ellipsis">
      get_bot_urls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run_bots_on_session" class="md-nav__link">
    <span class="md-ellipsis">
      run_bots_on_session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run_single_bot" class="md-nav__link">
    <span class="md-ellipsis">
      run_single_bot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#export-botex-data" class="md-nav__link">
    <span class="md-ellipsis">
      Export botex data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Export botex data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#read_participants_from_botex_db" class="md-nav__link">
    <span class="md-ellipsis">
      read_participants_from_botex_db
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read_conversations_from_botex_db" class="md-nav__link">
    <span class="md-ellipsis">
      read_conversations_from_botex_db
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read_responses_from_botex_db" class="md-nav__link">
    <span class="md-ellipsis">
      read_responses_from_botex_db
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export_participant_data" class="md-nav__link">
    <span class="md-ellipsis">
      export_participant_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export_response_data" class="md-nav__link">
    <span class="md-ellipsis">
      export_response_data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="api-reference">API Reference</h1>
<p>This section details the botex API. It consists of a set of Python functions to set up and run oTree-based experiments using LLMs as bots.</p>
<p>The Python API can be divided into two main parts:</p>
<ol>
<li><strong>oTree Interface</strong>: Functions to interact with the oTree server, such as reading session config data from it, initializing sessions, and running bots on sessions.</li>
<li><strong>Export data</strong>: Functions to export data from the botex database.</li>
</ol>
<h2 id="otree-interface">oTree Interface</h2>
<p>Running experiments with botex requires an oTree server with an active session to be accessible. The following functions allow the user to interact with the oTree server. Once a session is initialized, the core functions <code>run_bots_on_session()</code> and <code>run_single_bot()</code> can be used to run bots on the session.</p>
<h3 id="init_otree_session"><code>init_otree_session</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Initialize an oTree session with a given number of participants.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config_name</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the oTree session configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>npart</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The total number of participants.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nhumans</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of human participants (defaults to zero). 
Provide either nhumans or is_human, but not both.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_human</code>
            </td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of booleans indicating whether each participant 
is human. Needs to be the same length as npart. If None 
(the default), humans (if present) will be randomly assigned.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>room_name</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the oTree room for the session. 
If None (the default),no room will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the SQLite database file to store BotEx 
data. If None (the default), it will be obtained from the 
environment variable BOTEX_DB. If the database does not exist, it 
will be created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>otree_server_url</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the oTree server. If None 
(the default), it will be obtained from the environment variable 
OTREE_SERVER_URL.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>otree_rest_key</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API key for the oTree server.
If None (the default), it will be obtained from the environment 
variable OTREE_REST_KEY.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>modified_session_config_fields</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of fields to modify 
in the the oTree session config. Default is None. </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict with the keys 'session_id', 'participant_code', 'is_human', </p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'bot_urls', and 'human_urls' containing the session ID, participant </p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>codes, human indicators, and the URLs for the human and bot </p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>participants.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/otree.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57"> 57</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58"> 58</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59"> 59</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-60"> 60</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-61"> 61</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-62"> 62</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-63"> 63</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-64"> 64</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-65"> 65</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-66"> 66</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-67"> 67</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-68"> 68</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-69"> 69</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-70"> 70</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-71"> 71</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-72"> 72</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-73"> 73</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74"> 74</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75"> 75</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76"> 76</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77"> 77</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78"> 78</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79"> 79</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80"> 80</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81"> 81</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82"> 82</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83"> 83</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84"> 84</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85"> 85</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-86"> 86</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">init_otree_session</span>(
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a>        config_name, npart, nhumans <span style="color: #666666">=</span> <span style="color: #40a070">0</span>, 
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>        is_human <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a>        room_name <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a>        botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a>        otree_server_url <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a>        otree_rest_key <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a>        modified_session_config_fields <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>    ):
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a><span style="color: #4070a0; font-style: italic">    Initialize an oTree session with a given number of participants.</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a><span style="color: #4070a0; font-style: italic">        config_name (str): The name of the oTree session configuration.</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a><span style="color: #4070a0; font-style: italic">        npart (int): The total number of participants.</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a><span style="color: #4070a0; font-style: italic">        nhumans (int): The number of human participants (defaults to zero). </span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a><span style="color: #4070a0; font-style: italic">            Provide either nhumans or is_human, but not both.</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a><span style="color: #4070a0; font-style: italic">        is_human (list): A list of booleans indicating whether each participant </span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a><span style="color: #4070a0; font-style: italic">            is human. Needs to be the same length as npart. If None </span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a><span style="color: #4070a0; font-style: italic">            (the default), humans (if present) will be randomly assigned.</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span style="color: #4070a0; font-style: italic">        room_name (str): The name of the oTree room for the session. </span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a><span style="color: #4070a0; font-style: italic">            If None (the default),no room will be used.</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a><span style="color: #4070a0; font-style: italic">        botex_db (str): The name of the SQLite database file to store BotEx </span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a><span style="color: #4070a0; font-style: italic">            data. If None (the default), it will be obtained from the </span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a><span style="color: #4070a0; font-style: italic">            environment variable BOTEX_DB. If the database does not exist, it </span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span style="color: #4070a0; font-style: italic">            will be created.</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a><span style="color: #4070a0; font-style: italic">        otree_server_url (str): The URL of the oTree server. If None </span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a><span style="color: #4070a0; font-style: italic">            (the default), it will be obtained from the environment variable </span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a><span style="color: #4070a0; font-style: italic">            OTREE_SERVER_URL.</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a><span style="color: #4070a0; font-style: italic">        otree_rest_key (str): The API key for the oTree server.</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span style="color: #4070a0; font-style: italic">            If None (the default), it will be obtained from the environment </span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span style="color: #4070a0; font-style: italic">            variable OTREE_REST_KEY.</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span style="color: #4070a0; font-style: italic">        modified_session_config_fields (dict): A dictionary of fields to modify </span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span style="color: #4070a0; font-style: italic">            in the the oTree session config. Default is None. </span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span style="color: #4070a0; font-style: italic">    Returns:</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a><span style="color: #4070a0; font-style: italic">        dict with the keys &#39;session_id&#39;, &#39;participant_code&#39;, &#39;is_human&#39;, </span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span style="color: #4070a0; font-style: italic">        &#39;bot_urls&#39;, and &#39;human_urls&#39; containing the session ID, participant </span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span style="color: #4070a0; font-style: italic">        codes, human indicators, and the URLs for the human and bot </span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span style="color: #4070a0; font-style: italic">        participants.</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">call_api</span>(method, <span style="color: #666666">*</span>path_parts, <span style="color: #666666">**</span>params) <span style="color: #666666">-&gt;</span> <span style="color: #007020">dict</span>:
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>        path_parts <span style="color: #666666">=</span> <span style="color: #4070a0">&#39;/&#39;</span><span style="color: #666666">.</span>join(path_parts)
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>        url <span style="color: #666666">=</span> <span style="color: #4070a0">f&#39;</span><span style="color: #70a0d0; font-style: italic">{</span>otree_server_url<span style="color: #70a0d0; font-style: italic">}</span><span style="color: #4070a0">/api/</span><span style="color: #70a0d0; font-style: italic">{</span>path_parts<span style="color: #70a0d0; font-style: italic">}</span><span style="color: #4070a0">&#39;</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>        resp <span style="color: #666666">=</span> method(url, json<span style="color: #666666">=</span>params, headers<span style="color: #666666">=</span>{<span style="color: #4070a0">&#39;otree-rest-key&#39;</span>: otree_rest_key})
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020; font-weight: bold">not</span> resp<span style="color: #666666">.</span>ok:
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a>            msg <span style="color: #666666">=</span> (
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a>                <span style="color: #4070a0">f&#39;Request to &quot;</span><span style="color: #70a0d0; font-style: italic">{</span>url<span style="color: #70a0d0; font-style: italic">}</span><span style="color: #4070a0">&quot; failed &#39;</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>                <span style="color: #4070a0">f&#39;with status code </span><span style="color: #70a0d0; font-style: italic">{</span>resp<span style="color: #666666">.</span>status_code<span style="color: #70a0d0; font-style: italic">}</span><span style="color: #4070a0">: </span><span style="color: #70a0d0; font-style: italic">{</span>resp<span style="color: #666666">.</span>text<span style="color: #70a0d0; font-style: italic">}</span><span style="color: #4070a0">&#39;</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a>            )
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a>            <span style="color: #007020; font-weight: bold">raise</span> <span style="color: #007020">Exception</span>(msg)
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span style="color: #007020; font-weight: bold">return</span> resp<span style="color: #666666">.</span>json()
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a>    <span style="color: #007020; font-weight: bold">if</span> nhumans <span style="color: #666666">&gt;</span> <span style="color: #40a070">0</span> <span style="color: #007020; font-weight: bold">and</span> is_human <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">not</span> <span style="color: #007020; font-weight: bold">None</span>: <span style="color: #007020; font-weight: bold">raise</span>(<span style="color: #007020">Exception</span>(
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span style="color: #4070a0">&quot;Provide either nhumans or is_human, but not both.&quot;</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a>    ))
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span style="color: #007020; font-weight: bold">if</span> is_human <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">not</span> <span style="color: #007020; font-weight: bold">None</span>:
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020">len</span>(is_human) <span style="color: #666666">!=</span> npart: <span style="color: #007020; font-weight: bold">raise</span>(<span style="color: #007020">Exception</span>(
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a>            <span style="color: #4070a0">&quot;Length of is_human must be the same as npart.&quot;</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a>        ))
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span style="color: #007020; font-weight: bold">if</span> is_human <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span> <span style="color: #007020; font-weight: bold">and</span> nhumans <span style="color: #666666">&gt;</span> <span style="color: #40a070">0</span>:
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a>        is_human <span style="color: #666666">=</span> [<span style="color: #007020; font-weight: bold">True</span>]<span style="color: #666666">*</span>nhumans <span style="color: #666666">+</span> [<span style="color: #007020; font-weight: bold">False</span>]<span style="color: #666666">*</span>(npart <span style="color: #666666">-</span> nhumans)
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a>        shuffle(is_human)
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span style="color: #007020; font-weight: bold">if</span> is_human <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span> <span style="color: #007020; font-weight: bold">and</span> nhumans <span style="color: #666666">==</span> <span style="color: #40a070">0</span>: is_human <span style="color: #666666">=</span> [<span style="color: #007020; font-weight: bold">False</span>]<span style="color: #666666">*</span>npart
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span style="color: #007020; font-weight: bold">if</span> botex_db <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: botex_db <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;BOTEX_DB&#39;</span>)
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span style="color: #007020; font-weight: bold">if</span> otree_server_url <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>:
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>        otree_server_url <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;OTREE_SERVER_URL&#39;</span>)
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span style="color: #007020; font-weight: bold">if</span> otree_rest_key <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>:
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>        otree_rest_key <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;OTREE_REST_KEY&#39;</span>)
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a>    session_id <span style="color: #666666">=</span> call_api(
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>        requests<span style="color: #666666">.</span>post, <span style="color: #4070a0">&#39;sessions&#39;</span>, session_config_name<span style="color: #666666">=</span>config_name, 
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a>        num_participants<span style="color: #666666">=</span>npart, room_name<span style="color: #666666">=</span>room_name,
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>        modified_session_config_fields<span style="color: #666666">=</span>modified_session_config_fields
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a>    )[<span style="color: #4070a0">&#39;code&#39;</span>]
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>    part_data <span style="color: #666666">=</span> <span style="color: #007020">sorted</span>(
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a>        call_api(requests<span style="color: #666666">.</span>get, <span style="color: #4070a0">&#39;sessions&#39;</span>, session_id)[<span style="color: #4070a0">&#39;participants&#39;</span>],
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>        key<span style="color: #666666">=</span><span style="color: #007020; font-weight: bold">lambda</span> d: d[<span style="color: #4070a0">&#39;id_in_session&#39;</span>]
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a>    )
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a>    part_codes <span style="color: #666666">=</span> [pd[<span style="color: #4070a0">&#39;code&#39;</span>] <span style="color: #007020; font-weight: bold">for</span> pd <span style="color: #007020; font-weight: bold">in</span> part_data]
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a>    base_url <span style="color: #666666">=</span> otree_server_url <span style="color: #666666">+</span> <span style="color: #4070a0">&#39;/InitializeParticipant/&#39;</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a>    urls <span style="color: #666666">=</span> [base_url <span style="color: #666666">+</span> pc <span style="color: #007020; font-weight: bold">for</span> pc <span style="color: #007020; font-weight: bold">in</span> part_codes]
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a>    rows <span style="color: #666666">=</span> <span style="color: #007020">zip</span>(
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a>        [config_name]<span style="color: #666666">*</span>npart, [session_id]<span style="color: #666666">*</span>npart, 
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a>        part_codes, is_human, urls
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a>    )
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a>    conn <span style="color: #666666">=</span> setup_botex_db(botex_db)
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>    cursor <span style="color: #666666">=</span> conn<span style="color: #666666">.</span>cursor()
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a>    cursor<span style="color: #666666">.</span>executemany(
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span style="color: #bbbbbb">        </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #4070a0; font-style: italic">        INSERT INTO participants (</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a><span style="color: #4070a0; font-style: italic">            session_name, session_id, participant_id, is_human, url) </span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #4070a0; font-style: italic">            VALUES (?, ?, ?, ?, ?) </span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span style="color: #4070a0; font-style: italic">        &quot;&quot;&quot;</span>, rows
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a>    )
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>    conn<span style="color: #666666">.</span>commit()
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>    cursor<span style="color: #666666">.</span>close()
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span style="color: #007020; font-weight: bold">return</span> {
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span style="color: #4070a0">&#39;session_id&#39;</span>: session_id, 
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>        <span style="color: #4070a0">&#39;participant_code&#39;</span>: part_codes,
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a>        <span style="color: #4070a0">&#39;is_human&#39;</span>: is_human,
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a>        <span style="color: #4070a0">&#39;bot_urls&#39;</span>: <span style="color: #007020">list</span>(compress(urls, [<span style="color: #007020; font-weight: bold">not</span> x <span style="color: #007020; font-weight: bold">for</span> x <span style="color: #007020; font-weight: bold">in</span> is_human])), 
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a>        <span style="color: #4070a0">&#39;human_urls&#39;</span>: <span style="color: #007020">list</span>(compress(urls, is_human))
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>    }
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h3 id="get_bot_urls"><code>get_bot_urls</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Get the URLs for the bot participants in an oTree session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>session_id</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the oTree session.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the SQLite database file to store BotEx 
data. If None (the default), it will be obtained from the 
environment variable BOTEX_DB.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of URLs for the bot participants.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/otree.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-195">195</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">get_bot_urls</span>(session_id, botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, already_started <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">False</span>):
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span style="color: #4070a0; font-style: italic">    Get the URLs for the bot participants in an oTree session.</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span style="color: #4070a0; font-style: italic">        session_id (str): The ID of the oTree session.</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span style="color: #4070a0; font-style: italic">        botex_db (str): The name of the SQLite database file to store BotEx </span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span style="color: #4070a0; font-style: italic">            data. If None (the default), it will be obtained from the </span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a><span style="color: #4070a0; font-style: italic">            environment variable BOTEX_DB.</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a><span style="color: #4070a0; font-style: italic">    Returns:</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a><span style="color: #4070a0; font-style: italic">        List of URLs for the bot participants.</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span style="color: #007020; font-weight: bold">if</span> botex_db <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: botex_db <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;BOTEX_DB&#39;</span>)
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a>    conn <span style="color: #666666">=</span> sqlite3<span style="color: #666666">.</span>connect(botex_db)
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a>    cursor <span style="color: #666666">=</span> conn<span style="color: #666666">.</span>cursor()
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a>    cursor<span style="color: #666666">.</span>execute(
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span style="color: #bbbbbb">        </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span style="color: #4070a0; font-style: italic">        SELECT url,time_in,time_out FROM participants </span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a><span style="color: #4070a0; font-style: italic">        WHERE session_id = ? AND is_human = 0</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a><span style="color: #4070a0; font-style: italic">        &quot;&quot;&quot;</span>, (session_id,)
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>    )
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span style="color: #007020; font-weight: bold">if</span> already_started:
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a>        urls <span style="color: #666666">=</span> [row[<span style="color: #40a070">0</span>] <span style="color: #007020; font-weight: bold">for</span> row <span style="color: #007020; font-weight: bold">in</span> cursor<span style="color: #666666">.</span>fetchall() <span style="color: #007020; font-weight: bold">if</span> row[<span style="color: #40a070">2</span>] <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>]
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span style="color: #007020; font-weight: bold">else</span>:
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a>        urls <span style="color: #666666">=</span> [row[<span style="color: #40a070">0</span>] <span style="color: #007020; font-weight: bold">for</span> row <span style="color: #007020; font-weight: bold">in</span> cursor<span style="color: #666666">.</span>fetchall() <span style="color: #007020; font-weight: bold">if</span> row[<span style="color: #40a070">1</span>] <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>]
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>    cursor<span style="color: #666666">.</span>close()
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a>    conn<span style="color: #666666">.</span>close()
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a>    <span style="color: #007020; font-weight: bold">return</span> urls
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h3 id="run_bots_on_session"><code>run_bots_on_session</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Run BotEx bots on an oTree session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>session_id</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the oTree session.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bots_urls</code>
            </td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of URLs for the bot participants.
Will be retrieved from the database if None (the default).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bot_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the SQLite database file for BotEx data.
If None (the default), it will be obtained from the environment 
variable BOTEX_DB.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>full_conv_history</code>
            </td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to keep the full conversation history.
This will increase token use and only work with very short 
experiments. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model to use for the bot. Default is "gpt-4o"
from OpenAI. You will need an OpenAI key and be prepared to pay to 
use this model. If set to "local", you need to provide a 
configuration for the local model in local_model_cfg.</p>
              </div>
            </td>
            <td>
                  <code>&#39;gpt-4o&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>openai_api_key</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API key for the OpenAI service. If None 
(the default), it will be obtained from the environment variable 
OPENAI_API_KEY.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>already_started</code>
            </td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the function will also run bots that 
have already started but not yet finished. This is useful if bots 
did not startup properly because of network issues. Default is 
False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>wait</code>
            </td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True (the default), the function will wait for the bots 
to finish.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>local_model_cfg</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for the local model. If model is 
"local", as a bare minimum it should contain, 
the "path_to_llama_server", and "local_llm_path" keys. 
If these ar not present, the function will
try to get them from the environment variables PATH_TO_LLAMA_SERVER
and LOCAL_LLM_PATH.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_prompts</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of user prompts to override the 
default prompts that the bot uses. The keys should be one or more of 
the following: ['start', 'analyze_first_page_no_q', 
'analyze_first_page_q', 'analyze_page_no_q', 'analyze_page_q', 
'analyze_page_no_q_full_hist', 'analyze_page_q_full_hist', 
'page_not_changed', 'system', 'resp_too_long', 'json_error', 'end'.] 
If a key is not present in the dictionary, the default prompt will 
be used. If a key that is not in the default prompts is present in 
the dictionary, then the bot will exit with a warning and not 
running to make sure that the user is aware of the issue.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None (bot conversation logs are stored in database)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/otree.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-221">221</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-222">222</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-223">223</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-224">224</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-225">225</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-226">226</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-227">227</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-228">228</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-229">229</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-230">230</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-231">231</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-232">232</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-233">233</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-234">234</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-235">235</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-236">236</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-237">237</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-238">238</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-239">239</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-240">240</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-241">241</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-242">242</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-243">243</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-244">244</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-245">245</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-246">246</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-247">247</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-248">248</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-249">249</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-250">250</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-251">251</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-252">252</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-253">253</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-254">254</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-255">255</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-256">256</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-257">257</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-258">258</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-259">259</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-260">260</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-261">261</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-262">262</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-263">263</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-264">264</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-265">265</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-266">266</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-267">267</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-268">268</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-269">269</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-270">270</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-271">271</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-272">272</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-273">273</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-274">274</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-275">275</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-276">276</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-277">277</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-278">278</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-279">279</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-280">280</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-281">281</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-282">282</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-283">283</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-284">284</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-285">285</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-286">286</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-287">287</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-288">288</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-289">289</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-290">290</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">run_bots_on_session</span>(
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a>        session_id, bot_urls <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, 
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a>        botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, 
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a>        model <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;gpt-4o&quot;</span>,
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a>        full_conv_history <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">False</span>,
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a>        openai_api_key <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>        already_started <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">False</span>,
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>        wait <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">True</span>,
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>        local_model_cfg<span style="color: #666666">=</span>{},
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>        user_prompts: <span style="color: #007020">dict</span> <span style="color: #666666">|</span> <span style="color: #007020; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>    ):
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a><span style="color: #4070a0; font-style: italic">    Run BotEx bots on an oTree session.</span>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a><span style="color: #4070a0; font-style: italic">        session_id (str): The ID of the oTree session.</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span style="color: #4070a0; font-style: italic">        bots_urls (list): A list of URLs for the bot participants.</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span style="color: #4070a0; font-style: italic">            Will be retrieved from the database if None (the default).</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span style="color: #4070a0; font-style: italic">        bot_db (str): The name of the SQLite database file for BotEx data.</span>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span style="color: #4070a0; font-style: italic">            If None (the default), it will be obtained from the environment </span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span style="color: #4070a0; font-style: italic">            variable BOTEX_DB.</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span style="color: #4070a0; font-style: italic">        full_conv_history (bool): Whether to keep the full conversation history.</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a><span style="color: #4070a0; font-style: italic">            This will increase token use and only work with very short </span>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span style="color: #4070a0; font-style: italic">            experiments. Default is False.</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a><span style="color: #4070a0; font-style: italic">        model (str): The model to use for the bot. Default is &quot;gpt-4o&quot;</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a><span style="color: #4070a0; font-style: italic">            from OpenAI. You will need an OpenAI key and be prepared to pay to </span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a><span style="color: #4070a0; font-style: italic">            use this model. If set to &quot;local&quot;, you need to provide a </span>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span style="color: #4070a0; font-style: italic">            configuration for the local model in local_model_cfg.</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span style="color: #4070a0; font-style: italic">        openai_api_key (str): The API key for the OpenAI service. If None </span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a><span style="color: #4070a0; font-style: italic">            (the default), it will be obtained from the environment variable </span>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span style="color: #4070a0; font-style: italic">            OPENAI_API_KEY.</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a><span style="color: #4070a0; font-style: italic">        already_started (bool): If True, the function will also run bots that </span>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span style="color: #4070a0; font-style: italic">            have already started but not yet finished. This is useful if bots </span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span style="color: #4070a0; font-style: italic">            did not startup properly because of network issues. Default is </span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a><span style="color: #4070a0; font-style: italic">            False.</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span style="color: #4070a0; font-style: italic">        wait (bool): If True (the default), the function will wait for the bots </span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span style="color: #4070a0; font-style: italic">            to finish.</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span style="color: #4070a0; font-style: italic">        local_model_cfg (dict): Configuration for the local model. If model is </span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a><span style="color: #4070a0; font-style: italic">            &quot;local&quot;, as a bare minimum it should contain, </span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a><span style="color: #4070a0; font-style: italic">            the &quot;path_to_llama_server&quot;, and &quot;local_llm_path&quot; keys. </span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a><span style="color: #4070a0; font-style: italic">            If these ar not present, the function will</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a><span style="color: #4070a0; font-style: italic">            try to get them from the environment variables PATH_TO_LLAMA_SERVER</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a><span style="color: #4070a0; font-style: italic">            and LOCAL_LLM_PATH.</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a><span style="color: #4070a0; font-style: italic">        user_prompts (dict): A dictionary of user prompts to override the </span>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a><span style="color: #4070a0; font-style: italic">            default prompts that the bot uses. The keys should be one or more of </span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a><span style="color: #4070a0; font-style: italic">            the following: [&#39;start&#39;, &#39;analyze_first_page_no_q&#39;, </span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a><span style="color: #4070a0; font-style: italic">            &#39;analyze_first_page_q&#39;, &#39;analyze_page_no_q&#39;, &#39;analyze_page_q&#39;, </span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a><span style="color: #4070a0; font-style: italic">            &#39;analyze_page_no_q_full_hist&#39;, &#39;analyze_page_q_full_hist&#39;, </span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a><span style="color: #4070a0; font-style: italic">            &#39;page_not_changed&#39;, &#39;system&#39;, &#39;resp_too_long&#39;, &#39;json_error&#39;, &#39;end&#39;.] </span>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a><span style="color: #4070a0; font-style: italic">            If a key is not present in the dictionary, the default prompt will </span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a><span style="color: #4070a0; font-style: italic">            be used. If a key that is not in the default prompts is present in </span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a><span style="color: #4070a0; font-style: italic">            the dictionary, then the bot will exit with a warning and not </span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a><span style="color: #4070a0; font-style: italic">            running to make sure that the user is aware of the issue.</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a><span style="color: #4070a0; font-style: italic">    Returns: </span>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a><span style="color: #4070a0; font-style: italic">        None (bot conversation logs are stored in database)</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a>    <span style="color: #007020; font-weight: bold">if</span> botex_db <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: botex_db <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;BOTEX_DB&#39;</span>)
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a>    <span style="color: #007020; font-weight: bold">if</span> openai_api_key <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: openai_api_key <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;OPENAI_API_KEY&#39;</span>)
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a>    <span style="color: #007020; font-weight: bold">if</span> bot_urls <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: 
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a>        bot_urls <span style="color: #666666">=</span> get_bot_urls(session_id, botex_db, already_started)
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span style="color: #007020; font-weight: bold">if</span> model <span style="color: #666666">==</span> <span style="color: #4070a0">&quot;local&quot;</span>:
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020; font-weight: bold">not</span> <span style="color: #4070a0">&quot;path_to_llama_server&quot;</span> <span style="color: #007020; font-weight: bold">in</span> local_model_cfg:
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a>            local_model_cfg[<span style="color: #4070a0">&quot;path_to_llama_server&quot;</span>] <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;PATH_TO_LLAMA_SERVER&#39;</span>)
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020; font-weight: bold">not</span> <span style="color: #4070a0">&quot;local_llm_path&quot;</span> <span style="color: #007020; font-weight: bold">in</span> local_model_cfg:
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a>            local_model_cfg[<span style="color: #4070a0">&quot;local_llm_path&quot;</span>] <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;LOCAL_LLM_PATH&#39;</span>)    
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a>        local_llm <span style="color: #666666">=</span> LocalLLM(<span style="color: #666666">**</span>local_model_cfg)
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a>        llm_server <span style="color: #666666">=</span> local_llm<span style="color: #666666">.</span>start_server()
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a>    <span style="color: #007020; font-weight: bold">else</span>:
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a>        local_llm <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span> 
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a>    threads <span style="color: #666666">=</span> [
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a>        Thread(
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a>            target <span style="color: #666666">=</span> run_bot, 
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a>            kwargs <span style="color: #666666">=</span> {
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a>                <span style="color: #4070a0">&#39;botex_db&#39;</span>: botex_db, <span style="color: #4070a0">&#39;session_id&#39;</span>: session_id, 
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a>                <span style="color: #4070a0">&#39;url&#39;</span>: url, <span style="color: #4070a0">&#39;full_conv_history&#39;</span>: full_conv_history, 
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a>                <span style="color: #4070a0">&#39;model&#39;</span>: model, <span style="color: #4070a0">&#39;openai_api_key&#39;</span>: openai_api_key, 
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a>                <span style="color: #4070a0">&#39;local_llm&#39;</span>: local_llm, <span style="color: #4070a0">&#39;user_prompts&#39;</span>: user_prompts
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a>            }
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a>        ) <span style="color: #007020; font-weight: bold">for</span> url <span style="color: #007020; font-weight: bold">in</span> bot_urls 
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a>    ]
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a>    <span style="color: #007020; font-weight: bold">for</span> t <span style="color: #007020; font-weight: bold">in</span> threads: t<span style="color: #666666">.</span>start()
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a>    <span style="color: #007020; font-weight: bold">if</span> wait: 
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span style="color: #007020; font-weight: bold">for</span> t <span style="color: #007020; font-weight: bold">in</span> threads: t<span style="color: #666666">.</span>join()
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span style="color: #007020; font-weight: bold">if</span> local_llm:
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span style="color: #007020; font-weight: bold">assert</span> llm_server, <span style="color: #4070a0">&quot;Local LLM server not started, but should have been.&quot;</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a>        local_llm<span style="color: #666666">.</span>stop_server(llm_server)
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h3 id="run_single_bot"><code>run_single_bot</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Runs a single botex bot manually.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The participant URL to start the bot on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>session_name</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the oTree session. Defaults to "unknown"</p>
              </div>
            </td>
            <td>
                  <code>&#39;unknown&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>session_id</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The oTree ID of the oTree session. 
Defaults to "unknown".</p>
              </div>
            </td>
            <td>
                  <code>&#39;unknown&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>participant_id</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The oTree ID of the participant. 
Defaults to "unknown".</p>
              </div>
            </td>
            <td>
                  <code>&#39;unknown&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the SQLite database file to store botex 
data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>full_conv_history</code>
            </td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to keep the full conversation history.
This will increase token use and only work with very short 
experiments. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model to use for the bot. Default is "gpt-4o"
from OpenAI. You will need an OpenAI key and be prepared to pay to 
use this model.</p>
              </div>
            </td>
            <td>
                  <code>&#39;gpt-4o&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>openai_api_key</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API key for the OpenAI service.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>local_llm</code>
            </td>
            <td>
                  <code><span title="botex.local_llm.LocalLLM">LocalLLM</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A LocalLLM object to use for the bot. If this is 
not None, the bot will use the local model instead of the OpenAI model.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None (conversation is stored in the botex database)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/otree.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-293">293</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-294">294</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-295">295</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-296">296</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-297">297</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-298">298</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-299">299</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-300">300</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-301">301</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-302">302</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-303">303</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-304">304</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-305">305</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-306">306</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-307">307</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-308">308</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-309">309</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-310">310</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-311">311</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-312">312</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-313">313</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-314">314</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-315">315</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-316">316</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-317">317</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-318">318</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-319">319</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-320">320</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-321">321</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-322">322</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-323">323</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-324">324</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-325">325</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-326">326</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-327">327</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-328">328</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-329">329</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-330">330</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-331">331</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-332">332</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-333">333</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-334">334</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-335">335</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-336">336</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-337">337</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-338">338</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-339">339</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-340">340</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-341">341</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-342">342</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-343">343</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-344">344</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-345">345</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-346">346</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-347">347</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-348">348</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-349">349</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-350">350</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-351">351</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-352">352</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-353">353</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-354">354</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-355">355</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-356">356</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-357">357</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-358">358</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">run_single_bot</span>(
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a>    url, session_name <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;unknown&quot;</span>, session_id <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;unknown&quot;</span>, 
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a>    participant_id <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;unknown&quot;</span>,
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a>    botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, full_conv_history <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">False</span>,
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a>    model <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;gpt-4o&quot;</span>, openai_api_key <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>,
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a>    local_llm: LocalLLM <span style="color: #666666">|</span> <span style="color: #007020; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, user_prompts: <span style="color: #007020">dict</span> <span style="color: #666666">|</span> <span style="color: #007020; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a>):
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a><span style="color: #4070a0; font-style: italic">    Runs a single botex bot manually.</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a><span style="color: #4070a0; font-style: italic">        url (str): The participant URL to start the bot on.</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a><span style="color: #4070a0; font-style: italic">        session_name (str): The name of the oTree session. Defaults to &quot;unknown&quot;</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a><span style="color: #4070a0; font-style: italic">        session_id (str): The oTree ID of the oTree session. </span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a><span style="color: #4070a0; font-style: italic">            Defaults to &quot;unknown&quot;.</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a><span style="color: #4070a0; font-style: italic">        participant_id (str): The oTree ID of the participant. </span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a><span style="color: #4070a0; font-style: italic">            Defaults to &quot;unknown&quot;.</span>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a><span style="color: #4070a0; font-style: italic">        botex_db (str): The name of the SQLite database file to store botex </span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a><span style="color: #4070a0; font-style: italic">            data.</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a><span style="color: #4070a0; font-style: italic">        full_conv_history (bool): Whether to keep the full conversation history.</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a><span style="color: #4070a0; font-style: italic">            This will increase token use and only work with very short </span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a><span style="color: #4070a0; font-style: italic">            experiments. Default is False.</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a><span style="color: #4070a0; font-style: italic">        model (str): The model to use for the bot. Default is &quot;gpt-4o&quot;</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a><span style="color: #4070a0; font-style: italic">            from OpenAI. You will need an OpenAI key and be prepared to pay to </span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a><span style="color: #4070a0; font-style: italic">            use this model.</span>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a><span style="color: #4070a0; font-style: italic">        openai_api_key (str): The API key for the OpenAI service.</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a><span style="color: #4070a0; font-style: italic">        local_llm (LocalLLM): A LocalLLM object to use for the bot. If this is </span>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a><span style="color: #4070a0; font-style: italic">            not None, the bot will use the local model instead of the OpenAI model.</span>
</span><span id="__span-0-321"><a id="__codelineno-0-321" name="__codelineno-0-321"></a>
</span><span id="__span-0-322"><a id="__codelineno-0-322" name="__codelineno-0-322"></a><span style="color: #4070a0; font-style: italic">    Returns: </span>
</span><span id="__span-0-323"><a id="__codelineno-0-323" name="__codelineno-0-323"></a><span style="color: #4070a0; font-style: italic">        None (conversation is stored in the botex database)</span>
</span><span id="__span-0-324"><a id="__codelineno-0-324" name="__codelineno-0-324"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-325"><a id="__codelineno-0-325" name="__codelineno-0-325"></a>    <span style="color: #007020; font-weight: bold">if</span> botex_db <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: botex_db <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;BOTEX_DB&#39;</span>)
</span><span id="__span-0-326"><a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span style="color: #007020; font-weight: bold">if</span> openai_api_key <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: openai_api_key <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;OPENAI_API_KEY&#39;</span>)
</span><span id="__span-0-327"><a id="__codelineno-0-327" name="__codelineno-0-327"></a>    <span style="color: #007020; font-weight: bold">if</span> model <span style="color: #666666">==</span> <span style="color: #4070a0">&quot;local&quot;</span>:
</span><span id="__span-0-328"><a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020; font-weight: bold">not</span> <span style="color: #4070a0">&quot;path_to_llama_server&quot;</span> <span style="color: #007020; font-weight: bold">in</span> local_model_cfg:
</span><span id="__span-0-329"><a id="__codelineno-0-329" name="__codelineno-0-329"></a>            local_model_cfg[<span style="color: #4070a0">&quot;path_to_llama_server&quot;</span>] <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;PATH_TO_LLAMA_SERVER&#39;</span>)
</span><span id="__span-0-330"><a id="__codelineno-0-330" name="__codelineno-0-330"></a>        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020; font-weight: bold">not</span> <span style="color: #4070a0">&quot;local_llm_path&quot;</span> <span style="color: #007020; font-weight: bold">in</span> local_model_cfg:
</span><span id="__span-0-331"><a id="__codelineno-0-331" name="__codelineno-0-331"></a>            local_model_cfg[<span style="color: #4070a0">&quot;local_llm_path&quot;</span>] <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;LOCAL_LLM_PATH&#39;</span>)    
</span><span id="__span-0-332"><a id="__codelineno-0-332" name="__codelineno-0-332"></a>        local_llm <span style="color: #666666">=</span> LocalLLM(<span style="color: #666666">**</span>local_model_cfg)
</span><span id="__span-0-333"><a id="__codelineno-0-333" name="__codelineno-0-333"></a>        llm_server <span style="color: #666666">=</span> local_llm<span style="color: #666666">.</span>start_server()
</span><span id="__span-0-334"><a id="__codelineno-0-334" name="__codelineno-0-334"></a>    <span style="color: #007020; font-weight: bold">else</span>:
</span><span id="__span-0-335"><a id="__codelineno-0-335" name="__codelineno-0-335"></a>        local_llm <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span> 
</span><span id="__span-0-336"><a id="__codelineno-0-336" name="__codelineno-0-336"></a>
</span><span id="__span-0-337"><a id="__codelineno-0-337" name="__codelineno-0-337"></a>    <span style="color: #007020; font-weight: bold">if</span> local_llm:
</span><span id="__span-0-338"><a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span style="color: #007020; font-weight: bold">assert</span> llm_server, <span style="color: #4070a0">&quot;Local LLM server not started, but should have been.&quot;</span>
</span><span id="__span-0-339"><a id="__codelineno-0-339" name="__codelineno-0-339"></a>        local_llm<span style="color: #666666">.</span>stop_server(llm_server)
</span><span id="__span-0-340"><a id="__codelineno-0-340" name="__codelineno-0-340"></a>
</span><span id="__span-0-341"><a id="__codelineno-0-341" name="__codelineno-0-341"></a>    is_human <span style="color: #666666">=</span> <span style="color: #40a070">0</span>
</span><span id="__span-0-342"><a id="__codelineno-0-342" name="__codelineno-0-342"></a>
</span><span id="__span-0-343"><a id="__codelineno-0-343" name="__codelineno-0-343"></a>    conn <span style="color: #666666">=</span> setup_botex_db(botex_db)
</span><span id="__span-0-344"><a id="__codelineno-0-344" name="__codelineno-0-344"></a>    cursor <span style="color: #666666">=</span> conn<span style="color: #666666">.</span>cursor()
</span><span id="__span-0-345"><a id="__codelineno-0-345" name="__codelineno-0-345"></a>    cursor<span style="color: #666666">.</span>execute(
</span><span id="__span-0-346"><a id="__codelineno-0-346" name="__codelineno-0-346"></a><span style="color: #bbbbbb">        </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-347"><a id="__codelineno-0-347" name="__codelineno-0-347"></a><span style="color: #4070a0; font-style: italic">        INSERT INTO participants (</span>
</span><span id="__span-0-348"><a id="__codelineno-0-348" name="__codelineno-0-348"></a><span style="color: #4070a0; font-style: italic">            session_name, session_id, participant_id, is_human, url) </span>
</span><span id="__span-0-349"><a id="__codelineno-0-349" name="__codelineno-0-349"></a><span style="color: #4070a0; font-style: italic">            VALUES (?, ?, ?, ?, ?) </span>
</span><span id="__span-0-350"><a id="__codelineno-0-350" name="__codelineno-0-350"></a><span style="color: #4070a0; font-style: italic">        &quot;&quot;&quot;</span>, (session_name, session_id, participant_id, is_human, url,)
</span><span id="__span-0-351"><a id="__codelineno-0-351" name="__codelineno-0-351"></a>    )
</span><span id="__span-0-352"><a id="__codelineno-0-352" name="__codelineno-0-352"></a>    conn<span style="color: #666666">.</span>commit()
</span><span id="__span-0-353"><a id="__codelineno-0-353" name="__codelineno-0-353"></a>    cursor<span style="color: #666666">.</span>close()
</span><span id="__span-0-354"><a id="__codelineno-0-354" name="__codelineno-0-354"></a>
</span><span id="__span-0-355"><a id="__codelineno-0-355" name="__codelineno-0-355"></a>    run_bot(
</span><span id="__span-0-356"><a id="__codelineno-0-356" name="__codelineno-0-356"></a>        botex_db, session_id, url, full_conv_history,
</span><span id="__span-0-357"><a id="__codelineno-0-357" name="__codelineno-0-357"></a>        model, openai_api_key, local_llm, user_prompts
</span><span id="__span-0-358"><a id="__codelineno-0-358" name="__codelineno-0-358"></a>    )
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h2 id="export-botex-data">Export botex data</h2>
<p>Running oTree experiments with botex generates two databases:</p>
<ol>
<li>The 'normal' experiment data that oTree collects.</li>
<li>Additional data that botex collects, such as the prompting sequence between botex and the bots, as well as the answers and the reasoning behind the answers that the LLM bots provide.</li>
</ol>
<p>botex provides functions to export botex data from the botex database. To obtain oTree data, you need to use the oTree web interface.</p>
<h3 id="read_participants_from_botex_db"><code>read_participants_from_botex_db</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Read the participants table from the botex database.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>session_id</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A session ID to filter the results.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of a SQLite database file.
If not provided, it will try to read the file name from
the environment variable BOTEX_DB.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dictionaries with participant data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/botex_db.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52">52</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53">53</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54">54</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55">55</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56">56</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57">57</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58">58</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59">59</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-60">60</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-61">61</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-62">62</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-63">63</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-64">64</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-65">65</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-66">66</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-67">67</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-68">68</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-69">69</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-70">70</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-71">71</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-72">72</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-73">73</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74">74</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75">75</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76">76</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77">77</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78">78</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79">79</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">read_participants_from_botex_db</span>(session_id <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>):
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span style="color: #4070a0; font-style: italic">    Read the participants table from the botex database.</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span style="color: #4070a0; font-style: italic">        session_id (str, optional): A session ID to filter the results.</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a><span style="color: #4070a0; font-style: italic">        botex_db (str, optional): The name of a SQLite database file.</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a><span style="color: #4070a0; font-style: italic">            If not provided, it will try to read the file name from</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a><span style="color: #4070a0; font-style: italic">            the environment variable BOTEX_DB.</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a><span style="color: #4070a0; font-style: italic">    Returns:</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a><span style="color: #4070a0; font-style: italic">        A list of dictionaries with participant data.</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span style="color: #007020; font-weight: bold">if</span> botex_db <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: botex_db <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;BOTEX_DB&#39;</span>)
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a>    conn <span style="color: #666666">=</span> sqlite3<span style="color: #666666">.</span>connect(botex_db)
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>    conn<span style="color: #666666">.</span>row_factory <span style="color: #666666">=</span> sqlite3<span style="color: #666666">.</span>Row 
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>    cursor <span style="color: #666666">=</span> conn<span style="color: #666666">.</span>cursor()
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span style="color: #007020; font-weight: bold">if</span> session_id:
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>        cursor<span style="color: #666666">.</span>execute(
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a>            <span style="color: #4070a0">&quot;SELECT * FROM participants WHERE session_id = ?&quot;</span>, (session_id,)
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a>        )
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span style="color: #007020; font-weight: bold">else</span>:
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a>        cursor<span style="color: #666666">.</span>execute(<span style="color: #4070a0">&quot;SELECT * FROM participants&quot;</span>)
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a>    sessions <span style="color: #666666">=</span> [<span style="color: #007020">dict</span>(row) <span style="color: #007020; font-weight: bold">for</span> row <span style="color: #007020; font-weight: bold">in</span> cursor<span style="color: #666666">.</span>fetchall()]
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a>    cursor<span style="color: #666666">.</span>close()
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>    conn<span style="color: #666666">.</span>close()
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span style="color: #007020; font-weight: bold">return</span> sessions
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h3 id="read_conversations_from_botex_db"><code>read_conversations_from_botex_db</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Reads the conversations table from the botex database. 
The conversation table contains the messages exchanged 
with the LLM underlying the bot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>session_id</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A session ID to filter the results.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of a SQLite database file.
If not provided, it will try to read the file name from
the environment variable BOTEX_DB.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dictionaries with the conversation data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/botex_db.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82"> 82</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83"> 83</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84"> 84</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85"> 85</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-86"> 86</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">read_conversations_from_botex_db</span>(
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>        session_id <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>    ):
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a><span style="color: #4070a0; font-style: italic">    Reads the conversations table from the botex database. </span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span style="color: #4070a0; font-style: italic">    The conversation table contains the messages exchanged </span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span style="color: #4070a0; font-style: italic">    with the LLM underlying the bot.</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span style="color: #4070a0; font-style: italic">        session_id (str, optional): A session ID to filter the results.</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span style="color: #4070a0; font-style: italic">        botex_db (str, optional): The name of a SQLite database file.</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a><span style="color: #4070a0; font-style: italic">            If not provided, it will try to read the file name from</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span style="color: #4070a0; font-style: italic">            the environment variable BOTEX_DB.</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span style="color: #4070a0; font-style: italic">    Returns:</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span style="color: #4070a0; font-style: italic">        A list of dictionaries with the conversation data.</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span style="color: #007020; font-weight: bold">if</span> botex_db <span style="color: #007020; font-weight: bold">is</span> <span style="color: #007020; font-weight: bold">None</span>: botex_db <span style="color: #666666">=</span> environ<span style="color: #666666">.</span>get(<span style="color: #4070a0">&#39;BOTEX_DB&#39;</span>)
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>    conn <span style="color: #666666">=</span> sqlite3<span style="color: #666666">.</span>connect(botex_db)
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>    conn<span style="color: #666666">.</span>row_factory <span style="color: #666666">=</span> sqlite3<span style="color: #666666">.</span>Row 
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>    cursor <span style="color: #666666">=</span> conn<span style="color: #666666">.</span>cursor()
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span style="color: #007020; font-weight: bold">if</span> session_id:
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a>        cursor<span style="color: #666666">.</span>execute(
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a>            <span style="color: #4070a0">&quot;SELECT * FROM conversations WHERE session_id = ?&quot;</span>, (session_id,)
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>        )
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span style="color: #007020; font-weight: bold">else</span>:
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a>        cursor<span style="color: #666666">.</span>execute(<span style="color: #4070a0">&quot;SELECT * FROM conversations&quot;</span>)
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>    conversations <span style="color: #666666">=</span> [<span style="color: #007020">dict</span>(row) <span style="color: #007020; font-weight: bold">for</span> row <span style="color: #007020; font-weight: bold">in</span> cursor<span style="color: #666666">.</span>fetchall()]
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a>    cursor<span style="color: #666666">.</span>close()
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a>    conn<span style="color: #666666">.</span>close()
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a>    <span style="color: #007020; font-weight: bold">return</span> conversations
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h3 id="read_responses_from_botex_db"><code>read_responses_from_botex_db</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Extracts the responses and their rationales from the botex conversation data. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>session_id</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A session ID to filter the results.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of a SQLite database file.
If not provided, it will try to read the file name from
the environment variable BOTEX_DB.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dictionaries with the rationale data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/botex_db.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">read_responses_from_botex_db</span>(session_id <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>, botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>):
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span style="color: #4070a0; font-style: italic">    Extracts the responses and their rationales from the botex conversation data. </span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span style="color: #4070a0; font-style: italic">        session_id (str, optional): A session ID to filter the results.</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a><span style="color: #4070a0; font-style: italic">        botex_db (str, optional): The name of a SQLite database file.</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span style="color: #4070a0; font-style: italic">            If not provided, it will try to read the file name from</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span style="color: #4070a0; font-style: italic">            the environment variable BOTEX_DB.</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a><span style="color: #4070a0; font-style: italic">    Returns:</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a><span style="color: #4070a0; font-style: italic">        A list of dictionaries with the rationale data.</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>    cs <span style="color: #666666">=</span> read_conversations_from_botex_db(botex_db <span style="color: #666666">=</span> botex_db)
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>    resp <span style="color: #666666">=</span> [parse_conversation(c) <span style="color: #007020; font-weight: bold">for</span> c <span style="color: #007020; font-weight: bold">in</span> cs]
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>    rt <span style="color: #666666">=</span> []
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span style="color: #007020; font-weight: bold">for</span> r <span style="color: #007020; font-weight: bold">in</span> resp:
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span style="color: #007020; font-weight: bold">for</span> a <span style="color: #007020; font-weight: bold">in</span> r[<span style="color: #4070a0">&#39;answers&#39;</span>]:
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>            rt<span style="color: #666666">.</span>append({
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a>                <span style="color: #4070a0">&#39;session_id&#39;</span>: r[<span style="color: #4070a0">&#39;session_id&#39;</span>], 
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>                <span style="color: #4070a0">&#39;participant_id&#39;</span>: r[<span style="color: #4070a0">&#39;participant_id&#39;</span>], 
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a>                <span style="color: #4070a0">&#39;round&#39;</span>: a[<span style="color: #4070a0">&#39;round&#39;</span>], 
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>                <span style="color: #4070a0">&#39;question_id&#39;</span>: a[<span style="color: #4070a0">&#39;id&#39;</span>], 
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a>                <span style="color: #4070a0">&#39;answer&#39;</span>: a[<span style="color: #4070a0">&#39;answer&#39;</span>], 
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>                <span style="color: #4070a0">&#39;reason&#39;</span>: a[<span style="color: #4070a0">&#39;reason&#39;</span>]
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a>            })
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a>    <span style="color: #007020; font-weight: bold">return</span> rt
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h3 id="export_participant_data"><code>export_participant_data</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Export the participants table from the botex database to a CSV file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>csv_file</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path to save the CSV file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path to the botex sqlite3 file. 
If not provided, it will try to read the file name from
the environment variable BOTEX_DB.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None (saves the CSV to the specified file path)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/botex_db.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">export_participant_data</span>(csv_file, botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>):
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #4070a0; font-style: italic">    Export the participants table from the botex database to a CSV file.</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a><span style="color: #4070a0; font-style: italic">        csv_file (str): The file path to save the CSV file.</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span style="color: #4070a0; font-style: italic">        botex_db (str, optional): The file path to the botex sqlite3 file. </span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a><span style="color: #4070a0; font-style: italic">            If not provided, it will try to read the file name from</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a><span style="color: #4070a0; font-style: italic">            the environment variable BOTEX_DB.</span>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #4070a0; font-style: italic">    Returns:</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a><span style="color: #4070a0; font-style: italic">        None (saves the CSV to the specified file path)</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a>    p <span style="color: #666666">=</span> read_participants_from_botex_db(botex_db <span style="color: #666666">=</span> botex_db)
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a>    <span style="color: #007020; font-weight: bold">with</span> <span style="color: #007020">open</span>(csv_file, <span style="color: #4070a0">&#39;w&#39;</span>) <span style="color: #007020; font-weight: bold">as</span> f:
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>        w <span style="color: #666666">=</span> csv<span style="color: #666666">.</span>DictWriter(f, p[<span style="color: #40a070">0</span>]<span style="color: #666666">.</span>keys())
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>        w<span style="color: #666666">.</span>writeheader()
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>        w<span style="color: #666666">.</span>writerows(p)
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h3 id="export_response_data"><code>export_response_data</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Export the responses parsed from the bot conversations in the botex
database to a CSV file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>csv_file</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path to save the CSV file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>botex_db</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path to the botex sqlite3 file. 
If not provided, it will try to read the file name from
the environment variable BOTEX_DB.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None (saves the CSV to the specified file path)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/botex/botex_db.py</code></summary>
              <div class="language-python highlight" style="background: #f0f0f0"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #666666; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">export_response_data</span>(csv_file, botex_db <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">None</span>):
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span style="color: #bbbbbb">    </span><span style="color: #4070a0; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a><span style="color: #4070a0; font-style: italic">    Export the responses parsed from the bot conversations in the botex</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a><span style="color: #4070a0; font-style: italic">    database to a CSV file.</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a><span style="color: #4070a0; font-style: italic">    Args:</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a><span style="color: #4070a0; font-style: italic">        csv_file (str): The file path to save the CSV file.</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span style="color: #4070a0; font-style: italic">        botex_db (str, optional): The file path to the botex sqlite3 file. </span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a><span style="color: #4070a0; font-style: italic">            If not provided, it will try to read the file name from</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a><span style="color: #4070a0; font-style: italic">            the environment variable BOTEX_DB.</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span style="color: #4070a0; font-style: italic">    Returns:</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span style="color: #4070a0; font-style: italic">        None (saves the CSV to the specified file path)</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a><span style="color: #4070a0; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>    r <span style="color: #666666">=</span> read_responses_from_botex_db(botex_db <span style="color: #666666">=</span> botex_db)
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span style="color: #007020; font-weight: bold">with</span> <span style="color: #007020">open</span>(csv_file, <span style="color: #4070a0">&#39;w&#39;</span>) <span style="color: #007020; font-weight: bold">as</span> f:
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>        w <span style="color: #666666">=</span> csv<span style="color: #666666">.</span>DictWriter(f, r[<span style="color: #40a070">0</span>]<span style="color: #666666">.</span>keys())
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a>        w<span style="color: #666666">.</span>writeheader()
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>        w<span style="color: #666666">.</span>writerows(r)
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Fikir Worku Edossa and Joachim Gassen <a href="https://www.accounting-for-transparency.de">TRR 266 Accounting for Transparency</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/joachim-gassen/botex" target="_blank" rel="noopener" title="Source Code" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/botex/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://bsky.app/profile/jgassen.bsky.social" target="_blank" rel="noopener" title="bsky.app" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["content.code.select", "content.code.copy", "navigation.tabs", "navigation.sections", "navigation.expand", "toc.integrate"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>